<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="twitter:description" content="Snapshot testing and why it makes sense"/><meta data-react-helmet="true" name="twitter:title" content="Snapshot testing and why it makes sense"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="Snapshot testing and why it makes sense"/><meta data-react-helmet="true" property="og:title" content="Snapshot testing and why it makes sense"/><meta data-react-helmet="true" name="description" content="Snapshot testing and why it makes sense"/><meta name="generator" content="Gatsby 4.10.3"/><style data-href="/styles.cefedff534358ceefcb7.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--grey-1:#243342;--grey-2:#536273;--grey-3:#6c7888;--grey-4:#f8f8f8;--grey-5:#e6e6e6;--white:#fff;--pink:#d03a84;--purple:#6951a1;--orange-1:#f05672;--orange-2:#f47a61;--main-font-color:var(--grey-1);--monospace-font-family:"Inconsolata",monospace;--body-font-family:"Inconsolata",monospace;--title-font-family:"Poppins",sans-serif;--blog-font-family:"Roboto",sans-serif}body{text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:var(--main-font-color);font-family:var(--body-font-family);font-size:20px;font-weight:400;line-height:26px}h1,h2,h3,h4,h5{font-family:var(--title-font-family);font-weight:700;line-height:2rem}@media (max-width:425px){h1{font-size:24px}}h1{line-height:45px}a{color:var(--pink)}a:hover{background-color:var(--purple);color:var(--white)}a.anchor{fill:var(--pink);vertical-align:middle}a.anchor>svg{height:1em;width:1em}a.anchor:hover{background-color:transparent}blockquote{border-left:.25em solid var(--grey-5);color:var(--grey-3);margin:0;padding:0 1em}hr{background-color:var(--grey-5);border:0;height:.25em;margin:24px 0;padding:0}code[class*=language-],pre[class*=language-]{border-radius:6px;font-family:var(--monospace-font-family)!important}:not(pre)>code[class*=language-]{padding:3px 5px!important}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Bio-module--container--CTV0B{font-family:var(--title-font-family);font-size:18px;font-style:italic;font-weight:300;margin-bottom:40px;margin-top:40px}.HeaderNavigation-module--container--yXex0{align-items:flex-start;display:flex;justify-content:space-between}.HeaderNavigation-module--textLinks--tPGE9{font-size:18px}@media only screen and (max-width:767px){.HeaderNavigation-module--container--yXex0{align-items:center;display:flex;flex-direction:row}}.HeaderNavigation-module--list--WF89i{-webkit-padding-start:0;padding-inline-start:0;text-align:center}.HeaderNavigation-module--navElement--HZCf2{display:inline;list-style-type:none;padding-right:20px}.HeaderNavigation-module--navElement--HZCf2:last-child{padding-right:0}.PrintLinks-module--container--ObbjZ{-webkit-padding-start:0;display:flex;justify-content:space-between;padding-inline-start:0}.PrintLinks-module--container--ObbjZ>li{display:inline;padding-right:15px}.PrintLinks-module--container--ObbjZ>li:last-of-type{padding-right:0}.Header-module--container--9\+PLF{display:flex;flex-direction:column;margin:0}.Header-module--container--9\+PLF nav{width:100%}.Header-module--author--eufK8{margin:15px 0 0;text-align:center}.Header-module--author--eufK8 a{color:var(--grey-1);font-size:20px;font-weight:400;margin-bottom:10px;margin-top:10px;text-decoration:none}.Header-module--author--eufK8 a:hover{color:var(--white)}@media only screen and (min-width:768px){.Header-module--container--9\+PLF{margin:20px 0}.Header-module--author--eufK8{text-align:left}.Header-module--author--eufK8 a{font-size:25px}}.Footer-module--footer--UZpYC{color:var(--grey-3);display:flex;flex-direction:column;font-size:14px;margin:40px 0;padding-top:20px;text-align:center}@media print{.Footer-module--footer--UZpYC{display:none}}.Layout-module--container--Fywx2{margin:auto}@media only screen and (max-width:767px){.Layout-module--container--Fywx2{font-size:16px;line-height:26px;margin-left:10px;margin-right:10px}}@media only screen and (min-width:768px){.Layout-module--container--Fywx2{max-width:720px}}@media only screen and (min-width:992px){.Layout-module--container--Fywx2{max-width:900px}}@media print{hr{display:none}}.Post-module--postTitle--T9cR2{font-size:20px;font-weight:400;margin-bottom:20px;margin-top:0}.Post-module--date--9cLgl{color:var(--grey-3)}.Post-module--postDescription--D-tma{font-size:18px;line-height:1.5;margin-bottom:10px;margin-top:5px}.blog-module--list--rOrp8{list-style:none;margin:0;padding:0}.Cta-module--button--mk0Yn{background:linear-gradient(to right,var(--purple) 50%,var(--pink) 50%);background-position:100% 100%;background-size:200% 100%;border:0;border-radius:2px;color:var(--white);cursor:pointer;font-family:var(--title-font-family);font-size:14px;font-weight:400;padding:5px 10px;text-decoration:none;transition:background .4s ease-out}.Cta-module--button--mk0Yn:hover{background-position:0 100%;color:var(--white)}.AboutMe-module--container--C412g{align-items:center;display:flex;flex-direction:column;text-align:center}.AboutMe-module--content--dX9KD p{color:var(--grey-2)}.AboutMe-module--img--6vy6i{border-radius:50%}.AboutMe-module--getCv--VLeHB{margin-top:15px}@media print{.AboutMe-module--getCv--VLeHB{display:none}h1{font-size:20px}}.SideProject-module--description--2c8g9{margin-left:20px}.SectionTitle-module--title--kIcoL{border-bottom:1px solid var(--pink);color:var(--pink);font-size:20px;letter-spacing:1.5px;margin-bottom:30px;padding:20px 0 10px;text-transform:uppercase}.SideProjectsListSection-module--list--lK4Gi{-webkit-padding-start:0;list-style-type:none;padding-inline-start:0}.ExpandButton-module--button--MbqRE{background-color:transparent;border:none;color:var(--grey-3);cursor:pointer;font-size:25px;outline:none;padding:0 0 15px;width:100%}.ExpandButton-module--arrow--BK0Ip{border-bottom:3px solid var(--grey-3);border-radius:2px;border-right:3px solid var(--grey-3);cursor:pointer;height:10px;margin:0 auto;width:10px}.ExpandButton-module--arrowDown--QcOwo{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ExpandButton-module--arrowUp--h72Yt{-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.WorkExperience-module--container--hGjTh{border-bottom:1px solid var(--grey-5);padding:0 5px}.WorkExperience-module--container--hGjTh ul{-webkit-padding-start:20px;padding-inline-start:20px}.WorkExperience-module--head--NpAt7{display:flex;flex-direction:column;justify-content:space-between}.WorkExperience-module--printContent--MCVJ5{display:none}.WorkExperience-module--screenContent--4sIR7{display:inherit}@media only screen and (min-width:768px){.WorkExperience-module--head--NpAt7{display:grid;grid-template-columns:25% 55% 20%}}@media print{.WorkExperience-module--container--hGjTh{border-bottom:none}.WorkExperience-module--head--NpAt7{display:grid;grid-template-columns:25% 50% 25%;page-break-after:avoid}.WorkExperience-module--printContent--MCVJ5{display:inherit}.WorkExperience-module--screenContent--4sIR7{display:none}}.WorkExperience-module--content--RMeCE{color:var(--grey-2)}.WorkExperience-module--title--\+0D0Y{color:var(--pink);font-size:16px;text-transform:uppercase}.WorkExperience-module--dates--kdmkO{color:var(--grey-3)}.WorkExperience-module--expandSection--ipHDB{text-align:center}.BlogPost-module--container--1Jk04{font-family:var(--blog-font-family);font-size:18px;font-weight:400;line-height:2rem}.BlogPost-module--date--esjRZ{color:var(--grey-3);font-size:16px}@media only screen and (min-width:768px){.BlogPost-module--container--1Jk04{font-size:20px;line-height:2.3rem}}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XM12P224W8"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-XM12P224W8', {"send_page_view":false});
      }
      </script><link rel="alternate" type="application/rss+xml" title="Gatsby Starter Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=a8bc7e4821fd384e9e062a484b40ae1f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a8bc7e4821fd384e9e062a484b40ae1f"/><link as="font" href="https://fonts.gstatic.com/s/inconsolata/v21/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyxq15IDhunJ_o.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/inconsolata/v21/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyx615IDhunJ_o.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/inconsolata/v21/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyya15IDhunA.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v19/pxiByp8kv8JHgFVrLDz8Z11lFd2JQEl8qw.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v19/pxiByp8kv8JHgFVrLDz8Z1JlFd2JQEl8qw.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v19/pxiByp8kv8JHgFVrLDz8Z1xlFd2JQEk.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v19/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v28/u-4n0qyriQwlOrhSvowK_l521wRZVcf6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v28/u-4n0qyriQwlOrhSvowK_l521wRZXMf6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v28/u-4n0qyriQwlOrhSvowK_l521wRZV8f6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v28/u-4n0qyriQwlOrhSvowK_l521wRZVsf6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v28/u-4n0qyriQwlOrhSvowK_l521wRZWMf6hPvhPQ.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v19/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v19/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyya15IDhunA.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyxq15IDhunJ_o.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyx615IDhunJ_o.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l521wRZVcf6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l521wRZXMf6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l521wRZV8f6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l521wRZVsf6hPvhPUWH.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l521wRZWMf6hPvhPQ.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8Z11lFd2JQEl8qw.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8Z1JlFd2JQEl8qw.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8Z1xlFd2JQEk.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2" rel="preload" crossorigin="anonymous"/><link as="font" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2" rel="preload" crossorigin="anonymous"/><title data-react-helmet="true">Snapshot testing and why it makes sense | Riccardo Coppola</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.googleapis.com"/><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Poppins:wght@300;400;700&amp;family=Roboto&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-82ab98780b4fce1dc269.js"/><link as="script" rel="preload" href="/framework-7b974518e1239d5d48d9.js"/><link as="script" rel="preload" href="/app-e98789a33bc321859966.js"/><link as="script" rel="preload" href="/commons-1a38289941fe2c2b1020.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-0ea653343252feb16c45.js"/><link as="fetch" rel="preload" href="/page-data/blog/snapshot-testing-and-why-it-makes-sense/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--container--Fywx2 BlogPost-module--container--1Jk04"><header class="Header-module--container--9+PLF"><h2 class="Header-module--author--eufK8"><a href="/blog">Riccardo Coppola</a></h2><nav><div class="HeaderNavigation-module--container--yXex0"><ul class="HeaderNavigation-module--list--WF89i HeaderNavigation-module--textLinks--tPGE9"><li class="HeaderNavigation-module--navElement--HZCf2"><a href="/blog">Blog</a></li><li class="HeaderNavigation-module--navElement--HZCf2"><a href="/">Profile</a></li></ul><ul class="HeaderNavigation-module--list--WF89i"><li class="HeaderNavigation-module--navElement--HZCf2"><a href="https://github.com/ricca509" class="social-icon" style="display:inline-block;width:30px;height:30px;position:relative;overflow:hidden;vertical-align:middle" aria-label="github"><div class="social-container" style="position:absolute;top:0;left:0;width:100%;height:100%"><svg class="social-svg" style="border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;fill-rule:evenodd" viewBox="0 0 64 64"><g class="social-svg-background" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:transparent"><circle cx="32" cy="32" r="31"></circle></g><g class="social-svg-icon" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#6c7888"><path d="M32,16c-8.8,0-16,7.2-16,16c0,7.1,4.6,13.1,10.9,15.2 c0.8,0.1,1.1-0.3,1.1-0.8c0-0.4,0-1.4,0-2.7c-4.5,1-5.4-2.1-5.4-2.1c-0.7-1.8-1.8-2.3-1.8-2.3c-1.5-1,0.1-1,0.1-1 c1.6,0.1,2.5,1.6,2.5,1.6c1.4,2.4,3.7,1.7,4.7,1.3c0.1-1,0.6-1.7,1-2.1c-3.6-0.4-7.3-1.8-7.3-7.9c0-1.7,0.6-3.2,1.6-4.3 c-0.2-0.4-0.7-2,0.2-4.2c0,0,1.3-0.4,4.4,1.6c1.3-0.4,2.6-0.5,4-0.5c1.4,0,2.7,0.2,4,0.5c3.1-2.1,4.4-1.6,4.4-1.6 c0.9,2.2,0.3,3.8,0.2,4.2c1,1.1,1.6,2.5,1.6,4.3c0,6.1-3.7,7.5-7.3,7.9c0.6,0.5,1.1,1.5,1.1,3c0,2.1,0,3.9,0,4.4 c0,0.4,0.3,0.9,1.1,0.8C43.4,45.1,48,39.1,48,32C48,23.2,40.8,16,32,16z"></path></g><g class="social-svg-mask" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#fff"><path d="M0,0v64h64V0H0z M37.1,47.2c-0.8,0.2-1.1-0.3-1.1-0.8c0-0.5,0-2.3,0-4.4c0-1.5-0.5-2.5-1.1-3 c3.6-0.4,7.3-1.7,7.3-7.9c0-1.7-0.6-3.2-1.6-4.3c0.2-0.4,0.7-2-0.2-4.2c0,0-1.3-0.4-4.4,1.6c-1.3-0.4-2.6-0.5-4-0.5 c-1.4,0-2.7,0.2-4,0.5c-3.1-2.1-4.4-1.6-4.4-1.6c-0.9,2.2-0.3,3.8-0.2,4.2c-1,1.1-1.6,2.5-1.6,4.3c0,6.1,3.7,7.5,7.3,7.9 c-0.5,0.4-0.9,1.1-1,2.1c-0.9,0.4-3.2,1.1-4.7-1.3c0,0-0.8-1.5-2.5-1.6c0,0-1.6,0-0.1,1c0,0,1,0.5,1.8,2.3c0,0,0.9,3.1,5.4,2.1 c0,1.3,0,2.3,0,2.7c0,0.4-0.3,0.9-1.1,0.8C20.6,45.1,16,39.1,16,32c0-8.8,7.2-16,16-16c8.8,0,16,7.2,16,16 C48,39.1,43.4,45.1,37.1,47.2z"></path></g></svg></div></a></li><li class="HeaderNavigation-module--navElement--HZCf2"><a href="https://www.linkedin.com/in/riccardocoppola/" class="social-icon" style="display:inline-block;width:30px;height:30px;position:relative;overflow:hidden;vertical-align:middle" aria-label="linkedin"><div class="social-container" style="position:absolute;top:0;left:0;width:100%;height:100%"><svg class="social-svg" style="border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;fill-rule:evenodd" viewBox="0 0 64 64"><g class="social-svg-background" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:transparent"><circle cx="32" cy="32" r="31"></circle></g><g class="social-svg-icon" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#6c7888"><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z"></path></g><g class="social-svg-mask" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#fff"><path d="M0,0v64h64V0H0z M25.8,44h-5.4V26.6h5.4V44z M23.1,24.3c-1.7,0-3.1-1.4-3.1-3.1c0-1.7,1.4-3.1,3.1-3.1 c1.7,0,3.1,1.4,3.1,3.1C26.2,22.9,24.8,24.3,23.1,24.3z M46,44h-5.4v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.5V44h-5.4V26.6 h5.2V29h0.1c0.7-1.4,2.5-2.8,5.1-2.8c5.5,0,6.5,3.6,6.5,8.3V44z"></path></g></svg></div></a></li><li class="HeaderNavigation-module--navElement--HZCf2"><a href="https://500px.com/ricca509" class="social-icon" style="display:inline-block;width:30px;height:30px;position:relative;overflow:hidden;vertical-align:middle" aria-label="fivehundredpix"><div class="social-container" style="position:absolute;top:0;left:0;width:100%;height:100%"><svg class="social-svg" style="border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;fill-rule:evenodd" viewBox="0 0 64 64"><g class="social-svg-background" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:transparent"><circle cx="32" cy="32" r="31"></circle></g><g class="social-svg-icon" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#6c7888"><path d="M42.9,27.6c-2.1,0-3.6,1-5.8,3.5c-1.9-2.5-3.8-3.5-5.8-3.5c-1.7,0-3.7,0.7-4.7,3.2 c-1-2-2.7-2.6-4.1-2.6c-1,0-2,0.2-2.9,1.1l0.6-3.3h6.2v-2.5h-8.4l-1.5,8v0.2h2.7c0.6-1,1.5-1.2,2.3-1.2c1.2,0,2.3,0.6,2.6,2.4v0.7 c-0.2,1.6-1.3,2.6-2.6,2.6c-1.1,0-2.3-0.6-2.4-2.2h-3v0.7c0,0.3,0.5,1.5,0.5,1.6c1.3,2.1,3.4,2.5,5,2.5c1.8,0,3.9-0.7,5.1-3.2 c1.1,2.4,3,3.1,4.8,3.1c2.1,0,3.5-0.9,5.7-3.3c1.9,2.3,3.7,3.3,5.7,3.3c3.4,0,5.1-2.6,5.1-5.6C48,30,46.2,27.6,42.9,27.6z  M34.7,33.7c-0.4,0.4-1,0.9-1.4,1.1c-0.7,0.4-1.3,0.6-1.9,0.6c-0.6,0-1.7-0.4-2.1-1.3c-0.1-0.2-0.2-0.6-0.2-0.7v-0.9 c0.3-1.5,1.1-2.1,2.2-2.1c0.1,0,0.6,0,0.9,0.1c0.4,0.1,0.7,0.3,1.1,0.6c0.4,0.3,2,1.6,2,1.8C35.3,33.2,34.9,33.5,34.7,33.7z  M42.9,35.5c-1.3,0-2.6-0.9-3.9-2.3c1.4-1.5,2.5-2.6,3.8-2.6c1.5,0,2.3,1.1,2.3,2.5C45.2,34.4,44.4,35.5,42.9,35.5z"></path></g><g class="social-svg-mask" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#fff"><path d="M33.3,31.3c-0.4-0.2-0.7-0.4-1.1-0.6c-0.3-0.1-0.8-0.1-0.9-0.1c-1.1,0-1.9,0.6-2.2,2.1v0.9c0,0.1,0.1,0.4,0.2,0.7 c0.3,0.9,1.4,1.3,2.1,1.3s1.2-0.2,1.9-0.6c0.5-0.3,1-0.7,1.4-1.1c0.2-0.2,0.5-0.5,0.5-0.6C35.3,32.8,33.7,31.6,33.3,31.3z  M42.8,30.6c-1.3,0-2.4,1-3.8,2.6c1.3,1.5,2.6,2.3,3.9,2.3c1.5,0,2.2-1.1,2.2-2.4C45.2,31.7,44.3,30.6,42.8,30.6z M0,0v64h64V0H0z  M42.9,38.5c-2,0-3.8-1-5.7-3.3c-2.2,2.4-3.7,3.3-5.7,3.3c-1.8,0-3.7-0.7-4.8-3.1c-1.2,2.5-3.3,3.2-5.1,3.2c-1.6,0-3.8-0.4-5-2.5 C16.5,36,16,34.8,16,34.5v-0.7h3c0.1,1.6,1.3,2.2,2.4,2.2c1.3,0,2.4-0.9,2.6-2.6v-0.7c-0.2-1.8-1.3-2.4-2.6-2.4 c-0.8,0-1.6,0.2-2.3,1.2h-2.7v-0.2l1.5-8h8.4v2.5h-6.2l-0.6,3.3c1-0.9,2-1.1,2.9-1.1c1.4,0,3.2,0.6,4.1,2.6c1-2.4,3-3.2,4.7-3.2 c2,0,3.9,1,5.8,3.5c2.1-2.6,3.7-3.5,5.8-3.5c3.3,0,5.1,2.4,5.1,5.4C48,35.9,46.2,38.5,42.9,38.5z"></path></g></svg></div></a></li><li class="HeaderNavigation-module--navElement--HZCf2"><a href="mailto:riccardo@onefiniteloop.io" class="social-icon" style="display:inline-block;width:30px;height:30px;position:relative;overflow:hidden;vertical-align:middle" aria-label="mailto"><div class="social-container" style="position:absolute;top:0;left:0;width:100%;height:100%"><svg class="social-svg" style="border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;fill-rule:evenodd" viewBox="0 0 64 64"><g class="social-svg-background" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:transparent"><circle cx="32" cy="32" r="31"></circle></g><g class="social-svg-icon" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#6c7888"><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z"></path></g><g class="social-svg-mask" style="-ms-transition:fill 170ms ease-in-out;-o-transition:fill 170ms ease-in-out;-moz-transition:fill 170ms ease-in-out;-webkit-transition:fill 170ms ease-in-out;transition:fill 170ms ease-in-out;fill:#fff"><path d="M41.1,25H22.9l9.1,7.1L41.1,25z M44,26.6l-12,9.3l-12-9.3V39h24V26.6z M0,0v64h64V0H0z M47,42H17V22h30V42z"></path></g></svg></div></a></li></ul></div></nav></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Snapshot testing and why it makes sense</h1><p class="BlogPost-module--date--esjRZ">February 24, 2017</p></header><section itemProp="articleBody"><p>The JavaScript world is ever changing: every day new libraries come out and, as developers, we’re lucky enough to get to try all these new ideas in our every day job.</p>
<p>Using the right tool for the right job means, in the end, using more tools and this leads us to more configuration, orchestration and maintenance (and, possibly, bugs). All of this goes under the name of <em>JavaScript fatigue</em>, a name that should represent the effort needed to stay on top of our game.<br>
JavaScript fatigue is, from my point of view, a blessing and we should embrace it as an opportunity to constantly add quality and improvements to our code base.</p>
<p>Of course not every tool or library will add value to the code, but many of them will help build the foundation of the next big thing.</p>
<p>Selecting the right tools is key.</p>
<h2 id="jest-yet-another-tool" style="position:relative;"><a href="#jest-yet-another-tool" aria-label="jest yet another tool permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>Jest, yet another tool</h2>
<p><a href="https://facebook.github.io/jest/">Jest</a> is the best testing tool that I’ve been using lately.<br>
It is built on top of Jasmine and developed by Facebook. Like Jasmine, it offers a test runner, assertion and mock methods.<br>
Its API is very similar to what the combo Mocha/chai offers, so the switch is easy and painless. Among other useful features, Jest offers an advanced system for mocking external dependencies (automatically or manually) and a new concept for testing React components called Snapshot testing.</p>
<h2 id="back-to-basics-unit-testing-a-function" style="position:relative;"><a href="#back-to-basics-unit-testing-a-function" aria-label="back to basics unit testing a function permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>Back to basics: unit testing a function</h2>
<p>Unit testing is all about isolating the system under test and checking that at every given input corresponds a given, predictable output: what is easier to test than a well thought function?</p>
<ol>
<li>Call the function with specific arguments</li>
<li>Compare the result with an expected value</li>
</ol>
<p>As an example, we’ll use a <code class="language-text">parseDate</code> function that takes a Date object in input and returns a different object containing day, month and year.<br>
The implementation is not important, just to have something to get going:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parseDate</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">day</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">month</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">year</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This function can be easily tested by passing different dates in input and checking that the output is the expected object (boooring!)</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> parseDate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'..'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'parseDate'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'parses a Date object'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expectedResult <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">day</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token literal-property property">month</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token literal-property property">year</span><span class="token operator">:</span> <span class="token number">2017</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expectedResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>If the expected object was big enough, you could decide to store it in a file, read that file at the beginning of your test and use that as expected result.</p>
<p>In a very similar fashion you can test API endpoint handlers: using a json file for the expected result that the endpoint should return:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> handler <span class="token keyword">from</span> <span class="token string">'../handler'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> expectedUserJson <span class="token keyword">from</span> <span class="token string">'../mocks/user'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'the user handler'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'returns the user information given its id'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>    
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token string">'35409DJFJ48'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expectedUserJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This ensures that the response looks 100% like the json that you want: you usually don’t test just a small part of it.</p>
<h2 id="unit-testing-ui-views-and-react-components-and-choosing-what-to-test" style="position:relative;"><a href="#unit-testing-ui-views-and-react-components-and-choosing-what-to-test" aria-label="unit testing ui views and react components and choosing what to test permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>Unit testing UI views and React components (and choosing what to test)</h2>
<p>Testing the UI has alway been different from function testing:</p>
<ol>
<li>Initialise and render the view in some sort of DOM,</li>
<li>Search for elements of interest in the DOM and make assertions on them.</li>
</ol>
<p>Very different from passing arguments to a function and getting an output: <strong>a)</strong> you have a hidden dependency that needs to be there (DOM) and <strong>b)</strong> you don’t test the result: you search for something known and make assertions on it.</p>
<p>In React, though, a component is just a function (or behaves like it in case you use the class declaration) so you can pass specific props and get back a React tree.</p>
<p>In case of shallow rendering, this becomes:</p>
<ol>
<li>(Shallow) render the component passing props and store the result in a variable (no DOM needed),</li>
<li>Search for elements of interest in the result and make assertions on them.</li>
</ol>
<p>The DOM dependency is now out of the equation (because of the <a href="https://facebook.github.io/react/docs/test-utils.html#shallow-rendering">shallow renderer</a>, more on this later), but we still have to search the result for known elements to make assertions like:</p>
<ul>
<li>Do I have a list with 10 elements?</li>
<li>Do I have an element with class “header”?</li>
<li>Does it contain the text “Buy now”?</li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// BuyNow.jsx</span>
<span class="token keyword">const</span> <span class="token function-variable function">BuyNow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> price<span class="token punctuation">,</span> text <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"price"</span><span class="token operator">></span>£<span class="token punctuation">{</span>price<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
  <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"btn-primary"</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// BuyNow.test.jsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> shallow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'enzyme'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> BuyNow <span class="token keyword">from</span> <span class="token string">'../BuyNow'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'The BuyNow component'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'renders with the right price'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>    
    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>BuyNow <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'£25'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Different from comparing the output of your render with an expected result, but React allows us to test the UI in a more function-like fashion.</p>
<p>UI testing, with all its moving parts, forces the developer to decide between partial testing (testing only the parts related to the UI logic, that are less likely to change) or go for deep testing: checking element types, classes and copy. When going for the second approach, tests become more brittle and need more maintenance: this is where snapshot testing comes into play.</p>
<h2 id="unit-testing-with-snapshots" style="position:relative;"><a href="#unit-testing-with-snapshots" aria-label="unit testing with snapshots permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>Unit testing with snapshots</h2>
<p>From the <a href="https://facebook.github.io/jest/docs/snapshot-testing.html">Jest website</a>:</p>
<blockquote>
<p>Snapshot tests are a very useful tool whenever you want to make sure your UI does not change unexpectedly.</p>
</blockquote>
<blockquote>
<p>Instead of rendering the graphical UI, which would require building the entire app, you can use a test renderer to quickly generate a serializable value for your React tree.</p>
</blockquote>
<p>I will not go into details of how exactly snapshot testing works, Facebook published <a href="https://facebook.github.io/jest/blog/2016/07/27/jest-14.html">great</a> <a href="https://facebook.github.io/jest/docs/snapshot-testing.html">articles</a> about it, definitely worth reading if new to the concept.</p>
<p>In short, snapshot testing means fully rendering a component (generating its React tree) and comparing the result with a stored, expected version (snapshot).<br>
If the new version differs (you added a container, changed a <em>div</em> into a section) the test fails and you are shown a diff with the changes. At this point you get to accept the changes or fix your code. If accepted, the stored snapshot gets updated with the newly accepted version.<br>
The very first time you run the snapshot test, the generated tree is implicitly accepted and stored in a file: that will represent the reference for future changes.</p>
<p>With snapshots, the flow becomes:</p>
<ol>
<li>(Shallow) render the component passing props and store the snapshot in a variable</li>
<li>Compare the resulting snapshot with a previously stored one</li>
</ol>
<p>No dependency on the DOM and we are comparing the whole output with an expected result: ?</p>
<p>A simple example on how to snapshot test a component and what gets generated follows:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// BuyNow.test.jsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> shallow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'enzyme'</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> toJson <span class="token keyword">from</span> <span class="token string">'enzyme-to-json'</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> BuyNow <span class="token keyword">from</span> <span class="token string">'../BuyNow'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'The BuyNow component'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'renders the right price and button'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>    
    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Buy now'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>BuyNow <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">toJson</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This test generates the following snapshot:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">exports[`The BuyNow component renders the right price and button 1`] = `
&lt;div>
  &lt;span
    className="price">
    £
    25
  &lt;/span>
  &lt;button
    className="btn-primary">
    Buy now
  &lt;/button>
&lt;/div>
`;</code></pre></div>
<p><em>The use of <code class="language-text">toJson</code> from the <a href="https://www.npmjs.com/package/enzyme-to-json">enzyme-to-json</a> package is needed to convert the result of the shallow renderer to a serializable value (more on this later). This can be avoided, though, by adding <a href="https://github.com/rogeliog/jest-serializer-enzyme">jest-serializer-enzyme</a> as a <code class="language-text">snapshotSerializers</code> in the Jest config.</em></p>
<p>Since the whole output is captured by the snapshot, it is good practice to either <strong>shallow render the component</strong> or <strong>mock it’s dependencies</strong>, so that a change in a nested component doesn’t break the test.</p>
<p>Snapshot testing gives you a completely different view of your component, showing all the generated tree, every time. It implicitly tests 100% of the generated markup, forcing you to accept or reject every small change.</p>
<h2 id="it-still-feels-like-tdd" style="position:relative;"><a href="#it-still-feels-like-tdd" aria-label="it still feels like tdd permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>It still feels like TDD</h2>
<p>Snapshot testing differs from the usual TDD approach but, for UI testing, it’s even better.</p>
<p>When we start developing a component we seldom know everything about it (the complete render output): class names, HTML attributes, element types are probably unknown, and more of an implementation detail. We know what the content should be and how it should behave, but we don’t know every detail: that’s why, when writing the tests, we only partially test the component, leaving outside all the unknowns.</p>
<p>Now consider the following workflow:</p>
<ol>
<li>Start jest in watch mode,</li>
<li>Write a snapshot test for a basic use case - test fails (component doesn’t exists),</li>
<li>Implement your component as an empty <em>div</em>, nothing else - snapshot gets created and test passes, although no logic has been introduced yet (snapshot is implicitly accepted because it’s being created),</li>
<li>Implement a small feature of the component (i.e. Make it a button) - test fails and shows you the diff,</li>
<li>Accept the changes or fix the component to make it look like it should and then accept the changes - snapshot gets updated and test passes,</li>
<li>Repeat 4 to 5 until the component respects the requirements for that particular scenario,</li>
<li>Add a new use case and repeat 4 to 6.</li>
</ol>
<p>Although when using snapshot testing the concept of test-driven development is slightly different, this workflow ensures that you always have to review every small code change that reflects into a UI change and never implicitly accept an unwanted change.</p>
<h2 id="snapshots-are-not-only-for-components" style="position:relative;"><a href="#snapshots-are-not-only-for-components" aria-label="snapshots are not only for components permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>Snapshots are not only for components</h2>
<p>Snapshots are an invaluable tool when it comes to UI testing, but their use is not only limited to it: technically <em>every serialisable value can be captured</em>.<br>
To make it useful, of course, the serialised value needs to retain its meaning so that it can be tested: there’s not much value in serialising a function into <code class="language-text">[Function]</code>.</p>
<p>A few examples follow, along with the generated snapshots:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Snapshot tests'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'work with objects'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">234</span><span class="token punctuation">,</span>
      <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'work with strings'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'This is a test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'work with arrays'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">exports[`Snapshot tests work with arrays 1`] = `
Array [
  "a",
  5,
  [Function],
]
`;

exports[`Snapshot tests work with objects 1`] = `
Object {
  "a": 234,
  "b": "test",
  "c": null,
  "d": undefined,
}
`;

exports[`Snapshot tests work with strings 1`] = `"This is a test"`;</code></pre></div>
<p>While it’s definitely possible to test API responses and other structures using snapshots, I still feel that setting expectations beforehand for completely defined modules is a better choice.<br>
Snapshots may be a nice addition when a module is stable, to prevent any unwanted change to happen, but I still see them as an addition, not a replacement for these cases.</p>
<h2 id="more-time-spent-on-testing-scenarios" style="position:relative;"><a href="#more-time-spent-on-testing-scenarios" aria-label="more time spent on testing scenarios permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>More time spent on testing scenarios</h2>
<p>Since writing the actual expectation for a snapshot test is trivial, you can spend more time on creating more scenarios to make your component more robust: the following is just a small list.</p>
<ul>
<li>Scenario with no props passed (testing defaults and undefined props)</li>
<li>Scenario with all props</li>
<li>Scenario with props of wrong types</li>
<li>Scenario with children</li>
<li>Scenario with no children</li>
</ul>
<p>Spending time on more scenarios means more resilient, robust code.<br>
Also, since the actual assertions when using snapshots don’t communicate the intended behaviour well, it becomes essential to write better test cases (more on this later).</p>
<h2 id="the-value-of-code-reviews" style="position:relative;"><a href="#the-value-of-code-reviews" aria-label="the value of code reviews permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>The value of code reviews</h2>
<p>In addition to “spec” files, we now get to review snapshot files. These are important files that should be reviewed with care, as they represent the UI markup the gets generated and the reviewer should take extra time to ensure that that markup is correct.</p>
<p>Since there are no specific expectations in code, test descriptions also become more important as they should clearly explain what that test is there for. Try to run the tests and read the output of the command line reporter: if it doesn’t communicate the intentions of the tests and the expected behaviour, work on the descriptions and make sure the tests represent your best documentation.</p>
<h2 id="keeping-an-open-mind" style="position:relative;"><a href="#keeping-an-open-mind" aria-label="keeping an open mind permalink" class="anchor before"><svg height="20" width="20" viewBox="-32 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg></a>Keeping an open mind</h2>
<p>Snapshots introduce a new, different way of testing where we don’t set expectations <em>beforehand</em> but we get to accept/refuse the <em>outcome</em> of a test.<br>
It can feel uncomfortable at the beginning and it has to be used with an open mind, judging the results rather than the approach.</p>
<p>As with everything, it is not a perfect solution and cannot be applied everywhere:</p>
<ul>
<li>it’s very easy to accept wrong snapshots by just pressing a button,</li>
<li>when multiple snapshots are failing it’s complicated to cherry-pick the ones you want to accept, very easy to accept them all (including the failing ones),</li>
<li>every time the name of a test is changed (<code class="language-text">describe</code>, <code class="language-text">it</code> or <code class="language-text">test</code> descriptions), the snapshot gets re-generated and implicitly accepted as newly created snapshot, so if you also change the code implementation at the same time, you’d be potentially accepting a failing snapshot.</li>
</ul>
<p>On the other hand, knowing what to watch out for, snapshots represent a very valuable tool when it comes to checking how the UI reacts to code changes.</p>
<p>My suggestion is to try it and give it a go for more than one week: I’m sure you won’t look back.</p></section><hr/><footer><div class="Bio-module--container--CTV0B">Notes on web development, life, learning and the world.</div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/dockerize-your-selenium-tests-to-run-everywhere/">← <!-- -->Dockerize your tests to run everywhere</a></li><li><a rel="next" href="/blog/dockerize-your-selenium-tests-to-run-everywhere-ii/">Dockerize your tests to run everywhere - Part II<!-- --> →</a></li></ul></nav></main><footer class="Footer-module--footer--UZpYC"><p>© <!-- -->2022<!-- --> Riccardo Coppola</p><p>This application is built with<!-- --> <a href="https://www.gatsbyjs.org/" alt="Gatsby link">Gatsby</a> <!-- -->and hosted on GitHub pages, take a look at the<!-- --> <a href="https://github.com/ricca509/ricca509.github.io" alt="GitHub repository" target="blank">source code on GitHub</a>.</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/snapshot-testing-and-why-it-makes-sense/";window.___webpackCompilationHash="857ada33359a2cc23ae0";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-415d0a1b5a3d1bc686e8.js"],"app":["/app-e98789a33bc321859966.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-ffc0300915f8765ca95d.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-5a07f5a972ce7f52ad92.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-876965a787eb5a76f334.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-0ea653343252feb16c45.js"]};/*]]>*/</script><script src="/polyfill-415d0a1b5a3d1bc686e8.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-0ea653343252feb16c45.js" async=""></script><script src="/commons-1a38289941fe2c2b1020.js" async=""></script><script src="/app-e98789a33bc321859966.js" async=""></script><script src="/framework-7b974518e1239d5d48d9.js" async=""></script><script src="/webpack-runtime-82ab98780b4fce1dc269.js" async=""></script></body></html>