{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/bower-and-grunt-a-practical-workflow/","result":{"data":{"site":{"siteMetadata":{"title":"Riccardo Coppola","author":{"name":"Riccardo Coppola"}}},"markdownRemark":{"id":"02f76d88-9ab6-5b3b-9d0a-7ab6c8fbf3ef","excerpt":"Bower & Grunt - A practical workflow on my slideshare Bower is a great tool: it searches, downloads and tracks all our front end dependencies. But it is not…","html":"<p><a href=\"https://www.slideshare.net/coppolariccardo/bower-grunt-a-practical-workflow\">Bower &#x26; Grunt - A practical workflow</a> on my <a href=\"http://www.slideshare.net/coppolariccardo\">slideshare</a></p>\n<p>Bower is a great tool: it searches, downloads and tracks all our front end dependencies.</p>\n<p>But it is not enough: we get all sort of useless files when we download our libraries: <code class=\"language-text\">docs/</code> <code class=\"language-text\">test/</code> <code class=\"language-text\">src/</code> <code class=\"language-text\">dist/</code> all this folders ar useless for us.</p>\n<ol>\n<li>We only need <em>one file</em>, usually <em>non minified</em> (we all have a uglify task in our workflow, do we?)</li>\n<li>We want to be able to copy <code class=\"language-text\">css</code> and <code class=\"language-text\">js</code> to different <em>vendor</em> folder</li>\n<li>We do not want to commit our <code class=\"language-text\">bower_components</code> folder</li>\n<li>We want just the libraries that we <strong>use</strong> in our vendor folders</li>\n<li>We want just <strong>one version</strong> of each library in our vendor folders</li>\n</ol>\n<p>So, it is clear that Bower alone is not enough, so I put together a very simple yet powerful workflow to get all these points sorted.</p>\n<h2 id=\"step-1-bower\" style=\"position:relative;\"><a href=\"#step-1-bower\" aria-label=\"step 1 bower permalink\" class=\"anchor before\"><svg height=\"20\" width=\"20\" viewBox=\"-32 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z\"/></svg></a>Step 1: Bower</h2>\n<blockquote>\n<p>A package manager for the web</p>\n</blockquote>\n<p>Use Bower as you always do, saving your dependencies into the <code class=\"language-text\">bower.json</code> file with the <code class=\"language-text\">--save</code> and <code class=\"language-text\">--save-dev</code> flags.</p>\n<h2 id=\"step-2-grunt-bowercopy\" style=\"position:relative;\"><a href=\"#step-2-grunt-bowercopy\" aria-label=\"step 2 grunt bowercopy permalink\" class=\"anchor before\"><svg height=\"20\" width=\"20\" viewBox=\"-32 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z\"/></svg></a>Step 2: <code class=\"language-text\">grunt-bowercopy</code></h2>\n<blockquote>\n<p>Consistently positions your dependencies where you want them in your repository</p>\n</blockquote>\n<p>Once you have all your dependencies in your <code class=\"language-text\">bower_components</code> folder, it is time to move them into specific folders (e.g. <code class=\"language-text\">/publis/js/vendor/</code> and <code class=\"language-text\">/publis/css/vendor/</code>): <a href=\"https://github.com/timmywil/grunt-bowercopy\">grunt-bowercopy</a> is the tool for you.</p>\n<p>Install the plugin: <code class=\"language-text\">npm install grunt-bowercopy --save-dev</code></p>\n<p>Now create a Grunt task for it. In your <code class=\"language-text\">grunt</code> folder (you are using <a href=\"https://github.com/firstandthird/load-grunt-config\">load-grunt-config</a>, right?), create a new file: <code class=\"language-text\">bowercopy.js</code>.</p>\n<p>The following is just an example. Notice that you don’t need to specify the <code class=\"language-text\">bower_components</code> folder in your configuration: grunt-bowercopy will read your <code class=\"language-text\">.bowerrc</code> and will prepend the right folder name for you.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">js</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">destPrefix</span><span class=\"token operator\">:</span> <span class=\"token string\">\"public/js/vendor\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"jquery.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jquery/jquery.js\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"require.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"requirejs/require.js\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">sass</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">destPrefix</span><span class=\"token operator\">:</span> <span class=\"token string\">\"public/css/vendor\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">bootstrap</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bootstrap-sass-official/bootstrap.js\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you now run <code class=\"language-text\">grunt bowercopy</code>, it will run <code class=\"language-text\">bower install</code> for you, then will copy the files in the right place: points 1, 2, 3 sorted!</p>\n<h2 id=\"step-3-grunt-contrib-clean\" style=\"position:relative;\"><a href=\"#step-3-grunt-contrib-clean\" aria-label=\"step 3 grunt contrib clean permalink\" class=\"anchor before\"><svg height=\"20\" width=\"20\" viewBox=\"-32 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z\"/></svg></a>Step 3: <code class=\"language-text\">grunt-contrib-clean</code></h2>\n<blockquote>\n<p>Clean files and folders.</p>\n</blockquote>\n<p>Ok, now that we have everything in place, we want to make sure that our vendor folders don’t grow, so we’ll clean them every time we commit!</p>\n<p>Install the plugin: <code class=\"language-text\">npm install grunt-contrib-clean --save-dev</code></p>\n<p>Now in your <code class=\"language-text\">grunt</code> folder, create a new file: <code class=\"language-text\">clean.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">vendor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'public/css/vendor/*'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js/vendor/*'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Running <code class=\"language-text\">grunt clean:vendor</code> will now delete everything beneath the two vendor folders: points 4 and 5 sorted!</p>\n<h2 id=\"everything-together\" style=\"position:relative;\"><a href=\"#everything-together\" aria-label=\"everything together permalink\" class=\"anchor before\"><svg height=\"20\" width=\"20\" viewBox=\"-32 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z\"/></svg></a>Everything together</h2>\n<p>It’s time to create an alias an put all this task at work, together!</p>\n<p>in your <code class=\"language-text\">grunt</code> folder, add to your <code class=\"language-text\">aliases.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">vendor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'clean:vendor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bowercopy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">precommit</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'vendor'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s it!<br>\nIn your <code class=\"language-text\">precommit</code> task, when you lint your files, run your tests and coverage and so on, make sure to include the <code class=\"language-text\">vendor</code> task and your vendor folders will always be clean and lightweight!</p>\n<p><strong>If you commit your dependencies</strong></p>\n<p>Ignore your <code class=\"language-text\">bower_components</code> and commit your clean <code class=\"language-text\">/publis/js/vendor/</code> and <code class=\"language-text\">/publis/css/vendor/</code>.</p>\n<p><strong>If you DO NOT commit your dependencies</strong></p>\n<p>Ignore your <code class=\"language-text\">bower_components</code>, <code class=\"language-text\">/publis/js/vendor/</code> and <code class=\"language-text\">/publis/css/vendor/</code>.<br>\nHave your CI run <code class=\"language-text\">grunt vendor</code> as first step of your workflow.</p>\n<p><strong>Enjoy your coding time!</strong></p>","frontmatter":{"title":"Bower and Grunt - A practical workflow","date":"October 14, 2014","description":"Bower and Grunt - A practical workflow"}},"previous":{"fields":{"slug":"/blog/jasmine-mock-ajax-for-backbone-requests/"},"frontmatter":{"title":"Jasmine: mock an endpoint using $.ajax and Promises for Backbone"}},"next":{"fields":{"slug":"/blog/custom-build-zepto-on-fly-with-grunt/"},"frontmatter":{"title":"Custom build Zepto with Grunt and Bower"}}},"pageContext":{"id":"02f76d88-9ab6-5b3b-9d0a-7ab6c8fbf3ef","previousPostId":"77e7cc3d-1781-5b5f-a7a4-a1619bb51209","nextPostId":"bc88bd9d-31e4-5ff2-8c2e-c74bbdb2975c"}},"staticQueryHashes":["2841359383"]}